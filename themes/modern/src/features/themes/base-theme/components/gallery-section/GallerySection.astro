---
import Container from '@/features/themes/base-theme/components/container/Container.astro';
import GallerySectionHeader from '@/features/themes/base-theme/components/gallery-section/GallerySectionHeader.astro';
import GallerySectionItem from '@/features/themes/base-theme/components/gallery-section/GallerySectionItem.astro';

import type { GallerySection as GallerySectionType } from '@/features/themes/base-theme/types/gallery';

interface Props {
  section: GallerySectionType;
  sectionIndex: number;
  mediaBaseUrl?: string;
}

const { section, sectionIndex, mediaBaseUrl } = Astro.props;

const validImages = section.images.filter((image) => image.width > 0 && image.height > 0 && image.thumbnail?.width > 0 && image.thumbnail?.height > 0);
---

<section class={`gallery-section gallery-section-${sectionIndex}`}>
  <Container>
    <GallerySectionHeader section={section} />
    <div class="gallery-section__gallery" id={`gallery-${sectionIndex}`}>
      {validImages.map((image) => <GallerySectionItem image={image} mediaBaseUrl={mediaBaseUrl} />)}
    </div>
  </Container>
</section>

<style>
  .gallery-section {
    padding: 1rem 1rem;
  }

  .gallery-section:nth-child(even) {
    background-color: #f9fafb;
  }

  .gallery-section__container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
  }

  .gallery-section__gallery {
    columns: 2;
    column-gap: 1rem;
    margin-bottom: 1rem;
  }

  @media (min-width: 640px) {
    .gallery-section__gallery {
      columns: 3;
    }
  }

  @media (min-width: 768px) {
    .gallery-section__gallery {
      columns: 4;
    }
  }

  @media (min-width: 1024px) {
    .gallery-section__gallery {
      columns: 5;
    }
  }

  @media (min-width: 1280px) {
    .gallery-section__gallery {
      columns: 6;
    }
  }
</style>
